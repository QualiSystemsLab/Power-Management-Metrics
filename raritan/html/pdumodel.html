<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Raritan PX2/PX3 JSON-RPC API: PDU Data Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Raritan PX2/PX3 JSON-RPC API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Interfaces</span></a></li>
      <li><a href="files.html"><span>IDL&#160;Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PDU Data Model </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The root object for the PDU data model is the pdumodel.Pdu interface which can be found at the well-known URI <code>/model/pdu/0</code>. The PDU object holds a number of inlets, overcurrent protectors, outlets, which can be retrieved with the <b>getInlets</b>, <b>getOverCurrentProtectors</b> and <b>getOutlets</b> methods. Alternatively those objects have well-known URIs like <code>/model/inlet/0</code>.</p>
<div class="image">
<img src="pdumodel.png"  alt="PDU Data Model"/>
</div>
<p>All data models have a similar set of properties:</p>
<ul>
<li><b>Metadata:</b> Static (immutable) data describing the object, like labels, plug types or ratings. Can be retrieved with the <b>getMetaData</b> method.</li>
<li><b>Settings:</b> User-configurable settings like names or cycle delays. Can be retrieved with <b>getSettings</b> and written with <b>setSettings</b>.</li>
<li><b>Sensors:</b> A structure holding references to sensors measuring electrical quantities of the object, e.g. the actual current flow. Can be retrieved with <b>getSensors</b>.</li>
<li><b>Poles:</b> A list of structures holding references to sensors measuring electrical quantities of individual phases. Can be retrieved with <b>getPoles</b>.</li>
</ul>
<h2>Relationships Between Objects</h2>
<p>Objects in the PDU model are assoicated in various ways:</p>
<ul>
<li>The PDU holds lists of inlets, overcurrent protectors and outlets.</li>
<li>An ovrecurrent protector is related to an inlet. This information can be important for models with multiple inlets and can be queried with <b>getInlets</b>. Also, in rare cases an overcurrent protector may be protected by a higher-level OCP. In this case this association can be queried with <b>getOCP</b>.</li>
<li>An outlet is related to an inlet and, in most cases, protected by an OCP. Both references are returned by the <b>getIOP</b> method.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>In case of models with transfer switch (PX3TS series), OCPs and outlets always reference the first inlet. The reference is not updated on transfer.</dd></dl>
<p>Additionally, inlets, OCPs and outlets implement the <b>EDevice</b> interface which defines a bi-directional parent-child relationship between devices, where being a parent means supplying power to another device. These relationships can be queried with the <b>getParents</b> and <b>getChildren</b> methods which both return vectors of other <b>EDevice</b> instances.</p>
<ul>
<li>Inlets never have parents (i.e., <b>getParents</b> returns an empty list) and have multiple children (typically OCPs, sometimes outlets).</li>
<li>OCPs have exactly one parent and multiple children (typically outlets, sometimes other OCPs).</li>
<li>Outlets have exactly one parent and no children.</li>
<li>The only device with more than one parent is a <b>TransferSwitch</b>.</li>
</ul>
<h2>Retrieving Sensor Readings</h2>
<h3>Single-Phase Inlets and Outlets</h3>
<p>All sensor references for single-phase inlets and outlets can be retrieved with the <b>getSensors</b> methods. They have no pole sensors for individual phases.</p>
<p>The following sensors are supported for inlets and metered outlets. Depending on the PDU model not all sensors may be available:</p>
<ul>
<li><b>voltage:</b> RMS voltage (A)</li>
<li><b>lineFrequency:</b> Line frequency (Hz)</li>
<li><b>current:</b> RMS current (V)</li>
<li><b>activePower:</b> Active power (W)</li>
<li><b>reactivePower:</b> Reactive power (var)</li>
<li><b>apparentPower:</b> Apparent power (VA)</li>
<li><b>powerFactor:</b> Total power factor (no unit)</li>
<li><b>displacementPowerFactor:</b> Power factor due to phase shift (no unit)</li>
<li><b>phaseAngle:</b> Phase angle between voltage and current (degrees)</li>
<li><b>activeEnergy:</b> Active energy counter (Wh)</li>
<li><b>residualCurrent:</b> Residual current (A)</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Python example: Display all outlet energy counters</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> raritan.rpc.pdumodel</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keywordflow">for</span> outlet <span class="keywordflow">in</span> pdu.getOutlets():</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    energy_sensor = outlet.getSensors().activeEnergy</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    print(<span class="stringliteral">&quot;%d Wh&quot;</span> % energy_sensor.getReading().value)</div></div><!-- fragment --><h3>Three-Phase Inlets and Outlets</h3>
<p>Three-phase inlets and outlets have both global sensors (<b>getSensors</b>) and individual phase sensors (<b>getPoles</b>). Readings for most global sensors are a combination of the phase readings:</p>
<ul>
<li>The inlet/outlet voltage reading is the minimum of the line-line voltages.</li>
<li>The inlet/outlet current reading is the maximum of the line currents.</li>
<li>Inlet/outlet power and energy readings are the sum of line powers and energy counters.</li>
<li><b>unbalancedCurrent</b> is the maximum difference (in percent) between the three phase current readings and the average current reading.</li>
</ul>
<p>Poles of three phase inlets and outlets have two voltage sensors:</p>
<ul>
<li><b>voltage</b> is the voltage between this phase and the next, e.g. the voltage sensor of the L1 pole returns the L1-L2 voltage.</li>
<li><b>voltageLN</b> is the voltage between the phase and the neutral/earth potential.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Python example: Display three-phase inlet voltages</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> raritan.rpc.pdumodel</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;inlet = pdumodel.Inlet(<span class="stringliteral">&quot;/model/inlet/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;poles = inlet.getPoles()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;ll = [ pole.voltage.getReading().value <span class="keywordflow">for</span> pole <span class="keywordflow">in</span> poles[0:3] ]</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;print(<span class="stringliteral">&quot;L1-L2=%.1fV, L2-L3=%.1fV, L3-L1=%.1fV&quot;</span> % (ll[0], ll[1], ll[2]))</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;ln = [ pole.voltageLN.getReading().value <span class="keywordflow">for</span> pole <span class="keywordflow">in</span> poles[0:3] ]</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;print(<span class="stringliteral">&quot;L1-N=%.1fV, L2-N=%.1fV, L3-N=%.1fV&quot;</span> % (ln[0], ln[1], ln[2]))</div></div><!-- fragment --><h2>Switching Outlets</h2>
<p>Individual outlets can be switched or power-cycled using the following methods:</p>
<ul>
<li><b>Outlet.setPowerState:</b> Switches an individual outlet on or off</li>
<li><b>Outlet.cyclePowerState:</b> Power-cycles an individual outlet</li>
<li><b>Pdu.setMultipleOutletPowerStates:</b> Switches a given list of outlets</li>
<li><b>Pdu.cycleMultipleOutletPowerStates:</b> Power-cycles a list of outlets</li>
<li><b>Pdu.setAllOutletPowerStates:</b> Switches all outlets</li>
<li><b>Pdu.powerCycleAllOutletPowerStates:</b> Power-cycles all outlet</li>
</ul>
<h3>Sequencing</h3>
<p>The outlet sequence defines the order in which multiple outlets are switched on and the interval between switch operations. The sequence is used with the following methods:</p>
<ul>
<li><b>setAllOutletPowerStates</b> and <b>cycleAllOutletPowerStates</b> </li>
<li><b>setMultipleOutletPowerStates</b> and <b>cycleMultipleOutletPowerStates</b>, if the <b>respectSequence</b> parameter is <code>true</code></li>
</ul>
<p>The sequence is configured in the settings structures of the PDU and all outlets:</p>
<ul>
<li>The <b>outletPowerStateSequence</b> field in the PDU settings contains a list of zero-based outlet indexes and defines the order in which outlets are switched on. It can either be an empty list (no sequence defined) or a list that contains each outlet index exactly once.</li>
<li>The <b>sequenceDelay</b> field in the outlet settings defines the interval to wait before advancing the sequence after switching that outlet.</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Python example: Switch outlets in reverse order with a 2-second delay</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> raritan.rpc.pdumodel</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;outlets = pdu.getOutlets()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"># Set outletPowerStateSequence to reverse outlet order:</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;sequence = range(0, len(outlets))</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;sequence.reverse()</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;pdu_settings = pdu.getSettings()</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;pdu_settings.outletPowerStateSequence = sequence</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;pdu.setSettings(pdu_settings)</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"># Set sequence delay for all outlets to 2000 milliseconds:</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keywordflow">for</span> outlet <span class="keywordflow">in</span> outlets:</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    outlet_settings = outlet.getSettings()</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    outlet_settings.sequenceDelay = 2000</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    outlet.setSettings(outlet_settings)</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"># Power-cycle all outlets</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;pdu.cycleAllOutletPowerStates()</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 5 2017 19:14:41 for Raritan PX2/PX3 JSON-RPC API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
