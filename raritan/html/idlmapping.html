<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Raritan PX2/PX3 JSON-RPC API: Rules and Mechanism for Mapping PX2/EMX-IDL to JSON-RPC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Raritan PX2/PX3 JSON-RPC API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Interfaces</span></a></li>
      <li><a href="files.html"><span>IDL&#160;Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Rules and Mechanism for Mapping PX2/EMX-IDL to JSON-RPC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Scope</h2>
<p>PX2/EMX devices provide a remote interface. The interface is a <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a> architecture and utilizes <a href="http://json-rpc.org/">JSON-RPC version 2.0</a> for formatting messages sent to and received from the device. This document defines how formal PX2/EMX-IDL is mapped to JSON-RPC.</p>
<h2>Mapping Rules</h2>
<h3>Type Mapping</h3>
<p>IDL types are mapped to <a href="http://www.json.org">JSON</a> value types as follows:</p>
<table class="doxtable">
<tr>
<th>IDL Type </th><th>JSON Representation  </th></tr>
<tr>
<td>boolean </td><td><code>true</code> or <code>false</code> </td></tr>
<tr>
<td>int </td><td>number </td></tr>
<tr>
<td>long </td><td>number </td></tr>
<tr>
<td>float </td><td>number </td></tr>
<tr>
<td>double </td><td>number </td></tr>
<tr>
<td>string </td><td>string </td></tr>
<tr>
<td>time </td><td>number containing number of seconds since the start of the Unix epoch (midnight UTC of January 1, 1970) </td></tr>
<tr>
<td>enumeration </td><td>number representing the index of the enumeration value (0-based) </td></tr>
<tr>
<td>structure </td><td>object containing one element per structure member </td></tr>
<tr>
<td>vector </td><td>array </td></tr>
<tr>
<td>map </td><td>array of objects, each containing two elements: 'key' for the entry's key, 'value' for the entry's value. </td></tr>
<tr>
<td>interface </td><td>object containing two elements: 'rid' contains the object identifier, 'type' contains the most derived interface type </td></tr>
</table>
<h3>Interface version Mapping</h3>
<p>Interface versions as specified in IDL-File (e.g. <code>NumericSensor_1_0_1</code>) are not mapped to the protocol as such as interface identifiers are not directly part of any protocol message. However, the interface version is part of the type information which is sent along with object references. Clients may use type information and hence version information to select a compatible proxy for a received object reference.</p>
<p>Interface changes between firmware releases are documented in the file <a href="Changelog.txt">Changelog.txt</a>.</p>
<h3>Method Mapping</h3>
<p>IDL method calls are mapped to JSON-RPC as follows:</p>
<p>In JSON-RPC Request:</p>
<ul>
<li>method name: element 'method' of request object</li>
<li>in-parameters: element 'params' of request object, containing an object with one element per parameter</li>
<li>out-parameters: not mapped</li>
<li>return value: not mapped</li>
</ul>
<p>Example (net.Net.setNetworkConfigLan): </p><div class="fragment"><div class="line">{</div><div class="line">    <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;method&quot;</span>: <span class="stringliteral">&quot;setNetworkConfigLan&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;params&quot;</span>: {</div><div class="line">        <span class="stringliteral">&quot;speed&quot;</span>: 2,</div><div class="line">        <span class="stringliteral">&quot;duplex&quot;</span>: 0,</div><div class="line">    },</div><div class="line">    <span class="stringliteral">&quot;id&quot;</span>: 123</div><div class="line">}</div></div><!-- fragment --><p>In JSON-RPC Response:</p>
<ul>
<li>method name: not mapped</li>
<li>in-parameters: not mapped</li>
<li>out-parameters: element 'result' of response object, containing an object with one element per parameter</li>
<li>return value: special element'<em>ret</em>' of element 'result' of response object</li>
<li>system errors or exceptions: element 'error' of response object</li>
</ul>
<p>Example (result from devsettings.Snmp.getConfiguration): </p><div class="fragment"><div class="line">{</div><div class="line">    <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;result&quot;</span>: {</div><div class="line">        <span class="stringliteral">&quot;v2enable&quot;</span>: <span class="keyword">true</span>,</div><div class="line">        <span class="stringliteral">&quot;v3enable&quot;</span>: <span class="keyword">false</span>,</div><div class="line">        <span class="stringliteral">&quot;readComm&quot;</span>: <span class="stringliteral">&quot;public&quot;</span>,</div><div class="line">        <span class="stringliteral">&quot;writeComm&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line">        <span class="stringliteral">&quot;sysContact&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line">        <span class="stringliteral">&quot;sysName&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line">        <span class="stringliteral">&quot;sysLocation&quot;</span>: <span class="stringliteral">&quot;&quot;</span></div><div class="line">    },</div><div class="line">    <span class="stringliteral">&quot;id&quot;</span>: 456</div><div class="line">}</div></div><!-- fragment --><h2>Call Execution</h2>
<p>PX2/EMX-JSON-RPC uses HTTP-POST or HTTPS-POST requests. The JSON-RPC request is put into POST data, the JSON-RPC response is delivered in the HTTP/HTTPS response.</p>
<p>The HTTP URL includes an object reference which uniquely identifies a resource that implements a particular IDL interface. There are well-known references that must be used in initial requests. All well-known object references are defined in the file <a href="Well-Known-URIs.txt">Well-Known-URIs.txt</a>.</p>
<p>JSON-RPC responses may contain references to other objects. References returned by the device are "opaque", they do not use the well-known name. The 'rid' element of those opaque references must be used as URI in requests directed to the referenced resource.</p>
<h2>Authentication</h2>
<p>All RPC calls must be authenticated with valid user credentials. PX2/EMX supports two methods for passing those credentials:</p>
<ul>
<li>HTTP Basic Authentication</li>
<li>Raritan RPC Session Authentication</li>
</ul>
<h3>Basic Authentication</h3>
<p>For HTTP basic authentication the user name and password must be included in the <code>Authorization</code> header of every HTTP request. The contents of the header line must be the keyword <code>Basic</code> followed by a base64-encoded string containing the user name and password, separated by a colon. For instance, to authenticate a request with the default login admin/raritan the following header must be sent:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Authorization: Basic YWRtaW46cmFyaXRhbg==</div></div><!-- fragment --><h3>Session Authentication</h3>
<p>For Session-based authentication the client contacts the session manager at <code>/session</code> to open a new session. The initial <code>newSession</code> request must be sent with basic authentication. The server generates a 128-bit session token and sends it to the client. Subsequent requests can be authenticated by including a <code>X-SessionToken</code> HTTP header with the secret session token:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;X-SessionToken: 9e520dc84533342cd034b49550969e7f</div></div><!-- fragment --><p>The session token remains valid until the session expires or is closed. A session expires 30 seconds after the last request.</p>
<ul>
<li>see: <a class="el" href="interfacesession_1_1SessionManager__2__0__0.html" title="Session manager interface ">session.SessionManager_2_0_0</a></li>
</ul>
<h2>Bulk RPC</h2>
<p>For complex client programs which perform a great number of requests it is not feasible to send a separate HTTP request for every JSON-RPC method call. There is a significant performance overhead, particularly when using HTTPS. To reduce that overhead it is possible to combine multiple JSON-RPC requests into a single HTTP request using the BulkRequest interface at <code>/bulk</code>.</p>
<p>A bulk request is performed by calling the performBulk method with a vector of resource IDs and JSON-RPC request objectss. The method returns a list of HTTP status codes and JSON-RPC response objects.</p>
<p>Example (sent to <a href="https://my-device/bulk">https://my-device/bulk</a>): </p><div class="fragment"><div class="line">{</div><div class="line">    <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;method&quot;</span>: <span class="stringliteral">&quot;performBulk&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;params&quot;</span>: {</div><div class="line">        <span class="stringliteral">&quot;requests&quot;</span>: [</div><div class="line">            <span class="comment">// First request: Firmware::getVersion()</span></div><div class="line">            { <span class="stringliteral">&quot;rid&quot;</span>: <span class="stringliteral">&quot;/firmware&quot;</span>,</div><div class="line">              <span class="stringliteral">&quot;json&quot;</span>: { <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>, <span class="stringliteral">&quot;method&quot;</span>: <span class="stringliteral">&quot;getVersion&quot;</span>, <span class="stringliteral">&quot;params&quot;</span>: {}, <span class="stringliteral">&quot;id&quot;</span>: 1 } },</div><div class="line">            <span class="comment">// Second request: EventLog::clear()</span></div><div class="line">            { <span class="stringliteral">&quot;rid&quot;</span>: <span class="stringliteral">&quot;/eventlog&quot;</span>,</div><div class="line">              <span class="stringliteral">&quot;json&quot;</span>: { <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>, <span class="stringliteral">&quot;method&quot;</span>: <span class="stringliteral">&quot;clear&quot;</span>, <span class="stringliteral">&quot;params&quot;</span>: {}, <span class="stringliteral">&quot;id&quot;</span>: 2 } }</div><div class="line">        ]</div><div class="line">    },</div><div class="line">    <span class="stringliteral">&quot;id&quot;</span>: 123</div><div class="line">}</div></div><!-- fragment --><p>Response: </p><div class="fragment"><div class="line">{</div><div class="line">    <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;result&quot;</span>: {</div><div class="line">        <span class="stringliteral">&quot;responses&quot;</span>: [</div><div class="line">            <span class="comment">// First response: HTTP 200 (OK), firmware version</span></div><div class="line">            { <span class="stringliteral">&quot;statcode&quot;</span>: 200,</div><div class="line">              <span class="stringliteral">&quot;json&quot;</span>: { <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>, <span class="stringliteral">&quot;result&quot;</span>: { <span class="stringliteral">&quot;_ret_&quot;</span>: <span class="stringliteral">&quot;3.1.0.5-23456&quot;</span> }, <span class="stringliteral">&quot;id&quot;</span>: 1 } },</div><div class="line">            <span class="comment">// Second response: HTTP 200 (OK), no return value</span></div><div class="line">            { <span class="stringliteral">&quot;statcode&quot;</span>: 200,</div><div class="line">              <span class="stringliteral">&quot;json&quot;</span>: { <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>, <span class="stringliteral">&quot;result&quot;</span>: null, <span class="stringliteral">&quot;id&quot;</span>: 2 } }</div><div class="line">        ]</div><div class="line">    },</div><div class="line">    <span class="stringliteral">&quot;id&quot;</span>: 123</div><div class="line">}</div></div><!-- fragment --><p>The Java language binding uses bulk RPC by default when using the asynchronous API. The Perl und Python bindings do not support bulk RPC yet.</p>
<ul>
<li>see: bulkrpc.BulkRequest_1_0_1 </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 5 2017 19:14:41 for Raritan PX2/PX3 JSON-RPC API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
