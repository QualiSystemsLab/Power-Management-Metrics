<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Raritan PX2/PX3 JSON-RPC API: Python JSON-RPC Client Binding</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Raritan PX2/PX3 JSON-RPC API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Interfaces</span></a></li>
      <li><a href="files.html"><span>IDL&#160;Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Python JSON-RPC Client Binding </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Pre-Requirements</h2>
<h3>Linux</h3>
<p>Standard Python 2 installations already contain all necessary packages.</p>
<h3>Windows</h3>
<ul>
<li>download and install Python 2.7 from <a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></li>
<li>the installation will associated the file extension *.py with python, so you can start python files directly from the command line or the file manager</li>
</ul>
<h2>Note on SSL Certificate Verification</h2>
<p>All Raritan devices enforce use of HTTPS when accessing the JSON-RPC service. By default, programs written with this client binding try to verify the authenticity of the server when connecting. This requires a valid SSL certificate to be installed on the device. When trying to connect to a device without a valid SSL certificate the client program will terminate with an error message.</p>
<p>It is possible to disable the SSL certificate verification by adding a "disable_certificate_verification" option to the arguments of the rpc.Agent instance:</p>
<p>Code: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>, disable_certificate_verification = <span class="keyword">True</span>)</div></div><!-- fragment --><h2>Timeout for IDL methods</h2>
<p>Per default, there is no time limit for the IDL method calls configured and so the function calls might not return if the target device is not available.</p>
<p>If necessary, a timeout in seconds can be provided by adding a "timeout" option to the arguments of the rpc.Agent instance.</p>
<p>Code: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>, timeout = 5)</div></div><!-- fragment --> <h2>Examples</h2>
<h3>Getting device information:</h3>
<p>Code: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> pdumodel</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;metadata = pdu.getMetaData()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keywordflow">print</span> metadata</div></div><!-- fragment --><p>Output produced if there is no error: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;pdumodel.Pdu.MetaData:</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    * nameplate               = <a class="code" href="structpdumodel_1_1Nameplate.html">pdumodel.Nameplate</a>:</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        * manufacturer = Raritan</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        * model        = PX2-2630U-A1</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        * partNumber   =</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        * serialNumber = PKE0954001</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        * rating       = <a class="code" href="structpdumodel_1_1Nameplate_1_1Rating.html">pdumodel.Nameplate.Rating</a>:</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            * voltage   = 360-415V</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            * current   = 24A</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            * frequency = 50/60Hz</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;            * power     = 15.0-17.3kVA</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        * imageFileURL =</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    * ctrlBoardSerial         = PKI9050003</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    * hwRevision              = 0x64</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    * fwRevision              = 3.0.2.5-41550</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    * macAddress              = 00:0d:5d:07:87:5c</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    * hasSwitchableOutlets    = <span class="keyword">True</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    * hasMeteredOutlets       = <span class="keyword">False</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    * hasLatchingOutletRelays = <span class="keyword">False</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    * isInlineMeter           = <span class="keyword">False</span></div></div><!-- fragment --><h3>Switching the first outlet:</h3>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> pdumodel</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;outlets = pdu.getOutlets()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;outlets[0].setPowerState(pdumodel.Outlet.PowerState.PS_OFF)</div></div><!-- fragment --><h3>Get current reading from first outlet:</h3>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> pdumodel</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;outlets = pdu.getOutlets()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;outlets[0].getSensors().current.getReading().value</div></div><!-- fragment --><h3>Configuring the SNMP agent:</h3>
<p>Code: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> devsettings</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-device.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;snmp_proxy = devsettings.Snmp(<span class="stringliteral">&quot;/snmp&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;config = snmp_proxy.getConfiguration()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;config.v2enable = <span class="keyword">True</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;config.readComm = <span class="stringliteral">&quot;public&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;config.writeComm = <span class="stringliteral">&quot;private&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;snmp_proxy.setConfiguration(config)</div></div><!-- fragment --><p>Note that the URIs given to the object proxies (such as <code>"/model/pdu/0"</code>) are well-known references to static (i.e. they are always there) object instances implemented by the device. All well-known references along with their interface are documented in file <a href="Well-Known-URIs.txt">Well-Known-URIs.txt</a> which comes along with the IDL files.</p>
<h2>IDL-to-Python Mapping</h2>
<h3>Modules and Python Packages</h3>
<p>All supporting and generated symbols are placed underneath common package <code>raritan.rpc</code>. IDL Modules are mapped to corresponding Python package within this common package. Import of all definitions within a module can be done via (for instance):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan.rpc.pdumodel <span class="keyword">import</span> *</div></div><!-- fragment --><h3>Interfaces and Methods</h3>
<p>IDL interfaces are mapped to Python classes which are defined in the <code><b>init</b></code>.py file of their according package. The python class implements a proxy that delegates calls to its IDL defined methods to the actual object implementation across the network.</p>
<p>The signature of the methods is slightly altered compared to the IDL signature. All <code>in</code> arguments are expected as arguments to the Python method in the same order as they appear in IDL. The return argument, if any, and all <code>out</code> arguments are returned as a Python tuple in the same order they appear in IDL. That means if there is a return argument defined it will appear as first element in the tuple, otherwise the first <code>out</code> argument is the first element in the tuple. If the IDL method has either only a return value or a single out argument, a single value is returned by the Python method without an embracing tuple.</p>
<h3>Structures</h3>
<p>IDL structures are mapped to Python classes which are, like all other definitions, defined in the <code><b>init</b></code>.py file of their according package. The class has all elements as defined in IDL. In addition there is a constructor with a signature that initializes all elements.</p>
<p>The following is an example for enabling a threshold in a sensor:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> pdumodel, sensors</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;outlet = pdumodel.Outlet(<span class="stringliteral">&quot;/model/pdu/0/outlet/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;currentsens = outlet.getSensors().current</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;thresholds = currentsens.getThresholds()</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;thresholds.lowerWarning = 1.0</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;thresholds.lowerWarningActive = true</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;currentsens.setThresholds(thresholds)</div></div><!-- fragment --><h3>Enumerations</h3>
<p>An IDL enumeration is mapped to a concrete class which has an element for each enumerated value. That means access to a particular enumerated value is accomplished by naming the enumeration type and the enumerated value. Consider the following example for switching an outlet:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># pdumodel has been imported and outlet has been initialized before, see above</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;outlet.setPowerState(pdumodel.Outlet.PowerState.PS_OFF)</div></div><!-- fragment --><p><code>PowerState</code> is an enumerated type defined in the <code>Outlet</code> interface. <code>PS_OFF</code> is a specific enumerated value defined in the <code>PowerState</code> enumeration.</p>
<h3>Vectors</h3>
<p>IDL vectors are mapped to Python lists. Consider the following example for looping over the list of all outlets of a Pdu and printing out informative data:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> pdumodel</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-px.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;outlets = pdu.getOutlets()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keywordflow">for</span> outlet <span class="keywordflow">in</span> outlets:</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="keywordflow">print</span> outlet.getMetaData()</div></div><!-- fragment --><h3>Maps</h3>
<p>IDL maps are mapped to Python dictionaries. Consider the following example for looping over all observed servers of the <code>servermon.ServerMonitor</code> and retrieving their entry id mapped to server entry structure which contains information and status:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> servermon</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-device.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;srvmonitor = servermon.ServerMonitor(<span class="stringliteral">&quot;/servermon&quot;</span>, agent);</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;servers = srvmonitor.listServers()</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keywordflow">for</span> srvid, srventry <span class="keywordflow">in</span> servers.iteritems():</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="keywordflow">print</span> srvid, srventry.settings.host, srventry.status.reachable</div></div><!-- fragment --><h3>Exceptions</h3>
<p>Execptional errors conditions may occur because of communication problems or encoding/decoding problems, or because of system errors that occur on the server while processing a request. Reporting of such error conditions is not part a regular IDL signature but part of the JSON-RPC protocol.</p>
<p>The Python implementation of the JSON-RPC protocol maps these error condtions to exception:</p>
<ul>
<li><b><code>raritan.rpc.HttpException</code> </b>  This exception is raised in case a communication error occured. Typical examples include an unreachable server or a failed authentication. The exception contains a descriptive text that gives more details on the error condition.</li>
<li><b><code>raritan.rpc.JsonRpcErrorException</code> </b>  This exception is raised in case an error happened on the server side while processing the request. The device might be in an unexpected state. Also there might be a version mismatch between client and server, which means the communication contract between client and server as specified by IDL is broken. The exception contains a descriptive text that gives more details on the error condition.</li>
<li><b><code>raritan.rpc.JsonRpcSyntaxException</code> </b>  This exception is raised in case demarshaling of a JSON message went wrong. This may indicate a version mismatch between client and server. The exception contains a descriptive text that gives more details on the error condition.</li>
</ul>
<p>Consider the following example for catching a communication error:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> pdumodel</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keywordflow">try</span>:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-pdu.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    pdu = pdumodel.Pdu(<span class="stringliteral">&quot;/model/pdu/0&quot;</span>, agent)</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;Getting PDU MetaData...&quot;</span>,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    metadata = pdu.getMetaData()</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;OK -&gt;&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="keywordflow">print</span> metadata</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keywordflow">except</span> rpc.HttpException, e:</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;ERROR:&quot;</span>, str(e)</div></div><!-- fragment --><h3>Bulk Requests</h3>
<p>The Bulk RPC interface allows combining multiple JSON-RPC method calls into a single bulk request that can be sent to the server and processed in a single HTTP request. The <code>raritan.rpc.BulkRequestHelper</code> class provides a convenient interface to collect and execute method calls:</p>
<ol type="1">
<li>Create a BulkRequestHelper instance.</li>
<li>Queue one or more method calls with the <code>add_request()</code> method.</li>
<li>Call perform_bulk() to submit the bulk request.</li>
<li>Use clear() to empty the request and response lists before reusing the BulkRequestHelper instance.</li>
</ol>
<p><code>perform_bulk()</code> returns a list containing one entry per queued request. Each entry can be one of the following:</p><ul>
<li><code>None</code> if the called method returns void and has no out parameters.</li>
<li>A single value if the method has exactly one return type or out parameter.</li>
<li>A tuple if the method has more than one return type/out parameter.</li>
<li>An <code>Exception</code> object if the request has failed and the optional <code>raise_subreq_failure</code> argument is False.</li>
</ul>
<p>Example:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> raritan <span class="keyword">import</span> rpc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> raritan.rpc <span class="keyword">import</span> devsettings</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;agent = rpc.Agent(<span class="stringliteral">&quot;https&quot;</span>, <span class="stringliteral">&quot;my-pdu.example.com&quot;</span>, <span class="stringliteral">&quot;admin&quot;</span>, <span class="stringliteral">&quot;raritan&quot;</span>)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;snmp_proxy = devsettings.Snmp(<span class="stringliteral">&quot;/snmp&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;cfg = devsettings.Snmp.Configuration( ... )</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;bulk_helper = rpc.BulkRequestHelper(agent)</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;bulk_helper.add_request(snmp_proxy.getV3EngineId)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;bulk_helper.add_request(snmp_proxy.setConfiguration, cfg)</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;responses = bulk_helper.perform_bulk(raise_subreq_failure = <span class="keyword">False</span>)</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keywordflow">if</span> isinstance(responses[0], Exception):</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;Snmp.getV3EngineId() failed: %s&quot;</span> % (responses[0])</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keywordflow">else</span>:</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;SNMP engine ID: %s&quot;</span> % (responses[0])</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keywordflow">if</span> isinstance(responses[1], Exception)</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;Snmp.setConfiguration() failed: %s&quot;</span> % (responses[1])</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keywordflow">else</span>:</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;Result of setConfiguration(): %d&quot;</span> % (responses[1])</div></div><!-- fragment --><h2>raritan.rpc.Agent Method Reference</h2>
<h3>Constructor: raritan.rpc.Agent(proto, host, user = None, passwd = None, token = None, debug = False, disable_certificate_verification = False, timeout = None)</h3>
<p>Creates a new agent.</p>
<p>Parameters:</p><ul>
<li><b>proto</b> Used protocol (either "https" or "http")</li>
<li><b>host</b> Hostname or IP address of the target PDU</li>
<li><b>user</b> User Name (optional)</li>
<li><b>passwd</b> Password (optional)</li>
<li><b>token</b> Authentication Token (optional)</li>
<li><b>debug</b> Enables debug output (optional, True/False)</li>
<li><b>disable_certificate_verification</b> Disables the Certificate Verification (True/False)</li>
<li><b>timeout</b> Request timeout (optional, timeout in seconds)</li>
</ul>
<p>If both, username/password and token are omitted, it is necessary to call either set_auth_basic() or set_auth_token() before the first request.</p>
<h3>set_auth_basic(user, password)</h3>
<p>This method enables HTTP basic authentication using username and password.</p>
<p>Parameters:</p><ul>
<li><b>user</b> User Name</li>
<li><b>password</b> Password</li>
</ul>
<h3>set_auth_token(token)</h3>
<p>This method enables HTTP authentication using a session token. A session token can be obtained by calling the newSession method of the session.SessionManager interface.</p>
<p>Parameters:</p><ul>
<li><b>token</b> Session Token </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 5 2017 19:14:41 for Raritan PX2/PX3 JSON-RPC API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
