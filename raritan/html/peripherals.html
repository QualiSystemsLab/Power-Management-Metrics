<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Raritan PX2/PX3 JSON-RPC API: Peripheral Devices</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Raritan PX2/PX3 JSON-RPC API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Interfaces</span></a></li>
      <li><a href="files.html"><span>IDL&#160;Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Peripheral Devices </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Peripheral devices (external sensors and actuators) are handled by the <b>PeripheralDeviceManager</b> interface. The device manager has a fixed number of slots that discovered sensors can be associated with. Assigning sensors to slots defines the order in which sensors are listed in other client interfaces like SNMP.</p>
<p>The peripheral device manager can either be accessed via its well-known URI <code>/model/peripheraldevicemanager</code>, or its reference can be retrieved by using the <b>getPeripheralDeviceManager</b> method of the <b>Pdu</b> or <b>Emd</b> interfaces.</p>
<h2>Using Peripheral Devices</h2>
<p>Peripheral devices must be assigned to one of the device manager's slots in order to be used. A device associated with a slot can have settings (like name or location) and a reading.</p>
<p>Settings for a sensor slot can be retrieved with the <b>getSettings</b> method and written with <b>setSettings</b>. <b>getDevice</b> returns information about the device associated with the slot (or <code>null</code> if the slot is unassigned), as well as a reference to the respective <b>NumericSensor</b> or <b>StateSensor</b> instance.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Python example: Display information about all managed peripheral devices</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> raritan.rpc.peripheral</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdm = raritan.rpc.peripheral.DeviceManager(<span class="stringliteral">&quot;/model/peripheraldevicemanager&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;slots = pdm.getDeviceSlots()</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keywordflow">for</span> num, slot <span class="keywordflow">in</span> enumerate(slots):</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    settings = slot.getSettings()</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    device = slot.getDevice()</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="keywordflow">if</span> device == <span class="keywordtype">None</span>:</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        print(<span class="stringliteral">&quot;Slot %d: unassigned&quot;</span> % (num + 1))</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        print(<span class="stringliteral">&quot;Slot %d: %s (%s)&quot;</span> % (num + 1, settings.name, device.deviceID.serial))</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        <span class="keywordflow">if</span> device.device:</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;            <span class="keywordflow">if</span> device.deviceID.type.readingtype == raritan.rpc.sensors.Sensor.NUMERIC:</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                reading = device.device.getReading()</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                print(<span class="stringliteral">&quot;  Reading: %f&quot;</span> % reading.value)</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                state = device.device.getState()</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                print(<span class="stringliteral">&quot;  State: %d&quot;</span> % state.value)</div></div><!-- fragment --><h2>Manually Assigning Sensors to Slots</h2>
<p>Sensors must be assigned to one of the deivce manager's slots in order to be used. By default, newly discovered sensors are automatically associated with the first available slot. The assignment can be manually overridden with the <b>assign</b> and <b>unassign</b> methods of the <b>PeripheralDeviceSlot</b> interface:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment"># Python example: Assign the first discovered sensor to the third slot</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> raritan.rpc.peripheral</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;pdm = raritan.rpc.peripheral.DeviceManager(<span class="stringliteral">&quot;/model/peripheraldevicemanager&quot;</span>, agent)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;discovered_devices = pdm.getDiscoveredDevices()</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;slots = pdm.getDeviceSlots()</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keywordflow">if</span> len(discovered_devices) &gt; 0:</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    slots[2].assign(discovered_devices[0].deviceID)</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 5 2017 19:14:41 for Raritan PX2/PX3 JSON-RPC API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
